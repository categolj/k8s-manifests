#@ load("@ytt:data", "data")
apiVersion: v1
kind: Secret
metadata:
  name: ootb-supply-chain-testing-scanning-metadata-store-secrets
  namespace: tap-install
  annotations:
    kapp.k14s.io/change-group: "tap-overlays"
type: Opaque
stringData:
  #@yaml/text-templated-strings
  ootb-supply-chain-testing-scanning-metadata-store-secrets.yml: |
    apiVersion: v1
    kind: Namespace
    metadata:
      name: metadata-store-secrets
    ---
    apiVersion: v1
    kind: Secret
    type: Opaque
    metadata:
      name: store-ca-cert
      namespace: metadata-store-secrets
    stringData:
      #! kubectl get secret -n metadata-store ingress-cert -otemplate='{{index .data "ca.crt" | base64decode}}' --context tap-view
      ca.crt: |
        ----BEGIN CERTIFICATE-----
        MIIC8TCCAdmgAwIBAgIRAMpsxC1AGKY84EiFrXs2//AwDQYJKoZIhvcNAQELBQAw
        EjEQMA4GA1UEAxMHY2EtY2VydDAeFw0yMjEwMTExOTQzMDFaFw0yMzAxMDkxOTQz
        MDFaMBIxEDAOBgNVBAMTB2NhLWNlcnQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
        ggEKAoIBAQCbwS5y2MkOvHQ7jFIEjEgxkvF1v062wn/fPJZdE5mQItDJDijkyEtM
        I9PGEEwd2y08oHMY/Ml3VXeozTU5fXNTrcfXmktj5rhex6qELTXIFkMwCf3e5rfM
        YukWXrECHOQ4+WoVanCSwUaqCFq/Z439U2XdrntH8G7PnhdjCWJaUIPgNqXU5vAB
        dDutCorA/0hWYCembLDzLQZO61u+Z/35cAJrz7e9PT0/wuYe1RQLCaG+i9WZatmG
        5gxOv4CSKoXT7PbV6TBkwJleiKdlzBo9KcdLySpitXQyGlmRV7IMAPbFcUFNkjow
        izadGpmf2EaqtQQCTifagKnLz8YVPc+jAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIC
        pDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBR7XaHeHE3jLb/00zNwkA2Y1vXv
        FDANBgkqhkiG9w0BAQsFAAOCAQEAb5+vG4Q3HgPMfHQPxrrRJGHDkWcf5ELTKFDf
        wLtkyekWZM64TaSUgaHZAjR8NznnbCJnVRMjjGFekKSv+zXEdxRvPeyxAUsU6ZOO
        lnWQoCcA9DugI3QtqB762e/5mP3h77TVbLMscPDNmDGudy1/zPB6q5YYP/91bBWj
        QGAzqPdGtD9usBW1XpErvglxEQejEFcI59Vp52eODxoCV7WqDBGdNjflcIoM5non
        k6RaN49hhXzJhWbtVkttNlgeDNkkslgJPlg5PrzyVLCLqAsEID/mvWv8bUMuWoEI
        2tvC6O75nTusLScw7fKxn1reTnYtDJPDhkixqIGSol21EeOHLA==
        -----END CERTIFICATE-----
    ---
    apiVersion: v1
    kind: Secret
    type: Opaque
    metadata:
      name: store-auth-token
      namespace: metadata-store-secrets
    stringData:
      #! kubectl get secret -n metadata-store metadata-store-read-client -otemplate='{{.data.token | base64decode}}' --context tap-view
      auth_token: (@= data.values.metadata_store.token @)