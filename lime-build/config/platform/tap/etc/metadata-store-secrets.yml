#@ load("@ytt:data", "data")
apiVersion: v1
kind: Namespace
metadata:
  name: metadata-store-secrets
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: store-ca-cert
  namespace: metadata-store-secrets
stringData:
  #! kubectl get secret -n metadata-store ingress-cert -otemplate='{{index .data "ca.crt" | base64decode}}' --context lime-view-admin
  ca.crt: |
    -----BEGIN CERTIFICATE-----
    MIIC8TCCAdmgAwIBAgIRAOF9jLVwybkf6JHGkNEIevMwDQYJKoZIhvcNAQELBQAw
    EjEQMA4GA1UEAxMHY2EtY2VydDAeFw0yMzAxMDUwNTIyMDRaFw0yMzA0MDUwNTIy
    MDRaMBIxEDAOBgNVBAMTB2NhLWNlcnQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
    ggEKAoIBAQCvGzaOlBWeHD9qBq0Xeh/4S1qpCvyB0KY4xHGYaEvNQfxjkKfy9ABE
    NLLq2m5WIgNdxcaFyvKsymF2TCDMdYLVG2zyKpc1F2GJwfRFRUIu3JaBFytxbwvU
    Yj9taynvzu9H1Gmzi3pQtd3clUKK00v35hHqNQceqrxDrWFJubdaXTMNj0pidfih
    X37LbWNlS+3wgnnPla/wk7u+pD9GLouEArWjRIwjF4bV/AOirgEAevcsmkAiAj1k
    /qTXY7tsoDqHxjYUOmzUpGHUxDkaN1dQrGLpROFd/+mdF9PyEd5jDrY26V7LP1Xf
    J/w7o/RdtZB/lyT7ZBdJbZJ25oqIMHgnAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIC
    pDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBSkclltXL938TxuV/BSNk0i52Hq
    BDANBgkqhkiG9w0BAQsFAAOCAQEAnMucWOk5L+zzPz2/d/xLBUyeW4WNEAmHcpmu
    s85SkOULbgrOe+tfQwM8KYwW8mFm1/3tzpixA5g++4EuSdEOAwBs0bwX+YbXO/Zq
    92WXtsmOzxpzlbz/gJmQ5bSV934RCMIZ83eZNqHRGT2MWT9qafLtpstI3fu7O1VJ
    rwz/m+R1/jzQIvOa9Y/KCQNTGP3x79OCWtOnr21byEZzSrkmF5Kyh0GKauN5LWi9
    rD2fb9udB55PdlIP7W2BlnBZ5T5DImqgoD8KByQNs61KvgTp78T3FsQuTKdNpU9Y
    7aPaTXerfxSa0cfFyG4SJqghtP2SAg6GCr8alV7FZ+/yFweI5A==
    -----END CERTIFICATE-----
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: store-auth-token
  namespace: metadata-store-secrets
stringData:
  #! kubectl get secret -n metadata-store metadata-store-read-write-client -otemplate='{{.data.token | base64decode}}' --context lime-view-admin
  auth_token: #@ data.values.metadata_store.token
---
apiVersion: secretgen.carvel.dev/v1alpha1
kind: SecretExport
metadata:
  name: store-ca-cert
  namespace: metadata-store-secrets
spec:
  toNamespace: "*"
---
apiVersion: secretgen.carvel.dev/v1alpha1
kind: SecretExport
metadata:
  name: store-auth-token
  namespace: metadata-store-secrets
spec:
  toNamespace: "*"