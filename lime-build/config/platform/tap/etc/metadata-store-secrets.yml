#@ load("@ytt:data", "data")
apiVersion: v1
kind: Namespace
metadata:
  name: metadata-store-secrets
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: store-ca-cert
  namespace: metadata-store-secrets
stringData:
  #! kubectl get secret -n metadata-store ingress-cert -otemplate='{{index .data "ca.crt" | base64decode}}' --context lime-view
  ca.crt: |
    -----BEGIN CERTIFICATE-----
    MIIC8DCCAdigAwIBAgIQYBjZRL3lQcg61h5OhwnIwjANBgkqhkiG9w0BAQsFADAS
    MRAwDgYDVQQDEwdjYS1jZXJ0MB4XDTIzMDQwNDA1MjIwNFoXDTI0MDQwMzA1MjIw
    NFowEjEQMA4GA1UEAxMHY2EtY2VydDCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC
    AQoCggEBAK8bNo6UFZ4cP2oGrRd6H/hLWqkK/IHQpjjEcZhoS81B/GOQp/L0AEQ0
    surablYiA13FxoXK8qzKYXZMIMx1gtUbbPIqlzUXYYnB9EVFQi7cloEXK3FvC9Ri
    P21rKe/O70fUabOLelC13dyVQorTS/fmEeo1Bx6qvEOtYUm5t1pdMw2PSmJ1+KFf
    fsttY2VL7fCCec+Vr/CTu76kP0Yui4QCtaNEjCMXhtX8A6KuAQB69yyaQCICPWT+
    pNdju2ygOofGNhQ6bNSkYdTEORo3V1CsYulE4V3/6Z0X0/IR3mMOtjbpXss/Vd8n
    /Duj9F21kH+XJPtkF0ltknbmiogweCcCAwEAAaNCMEAwDgYDVR0PAQH/BAQDAgKk
    MA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFKRyWW1cv3fxPG5X8FI2TSLnYeoE
    MA0GCSqGSIb3DQEBCwUAA4IBAQAQmG0M8JMZesu9EykV2tBsb/w0/gNNqGnx5WRo
    97tAOLR+PVlhf+eEUps6mx7dV2LyD76bQw8ZaoXxQYJ0pUcJZPFW/MrWQGqTI28O
    2GlBP9X/JUS0i1Lpqu5nmZjDXNDiai8OacIDX1+ZnGOtzlDZYTX6NloRSf3zNoxZ
    koQ4ohNrIr/7e512LxfaeD04YpcP7sfrNYdQ/qS3SjAVmEL2ipzuiZEK2x0xpZRe
    2wJZ7vlm2ymZm/M+FAq83YCMwENsgzv+2gIzLhzZzLKXViRVcAfKY220ObMuDIDD
    HHwoNAqRe+JhGgHA1QxNI9rD8UKNvECYfmmGf7yck21/uBo/
    -----END CERTIFICATE-----
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: store-auth-token
  namespace: metadata-store-secrets
stringData:
  #! kubectl get secret -n metadata-store metadata-store-read-write-client -otemplate='{{.data.token | base64decode}}' --context lime-view-admin
  auth_token: #@ data.values.metadata_store.token
---
apiVersion: secretgen.carvel.dev/v1alpha1
kind: SecretExport
metadata:
  name: store-ca-cert
  namespace: metadata-store-secrets
spec:
  toNamespace: "*"
---
apiVersion: secretgen.carvel.dev/v1alpha1
kind: SecretExport
metadata:
  name: store-auth-token
  namespace: metadata-store-secrets
spec:
  toNamespace: "*"